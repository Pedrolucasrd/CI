name: maven

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  kill-process:
  
      runs-on: ubuntu-latest
  
      steps:
      
      - name: Configure SSH
        uses: appleboy/ssh-action@master
        with:
          host: 187.60.56.72
          username: Administrator
          password: UCTech2023*
          script: |
            for /f "tokens=5" %a in ('netstat -ano ^| findstr :5088') do taskkill /f /pid %a
        continue-on-error: true

  clone:
  
      runs-on: ubuntu-latest
  
      steps:
      #
      
      - name: Configure SSH
        uses: appleboy/ssh-action@master
        with:
          host: 187.60.56.72
          username: Administrator
          password: UCTech2023*
          script: |
            cd aplicacoes && git config --global credential.helper store && git clone -b developer https://github.com/uctbr/imovpago-back-end
